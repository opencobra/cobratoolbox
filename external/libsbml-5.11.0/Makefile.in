## @configure_input@
##
## Filename    : Makefile.in
## Description : Makefile template for use by 'configure'
## Author(s)   : SBML Team <sbml-team@caltech.edu>
## Organization: California Institute of Technology
## Created     : 2004-05-31
##
## <!--------------------------------------------------------------------------
## This file is part of libSBML.  Please visit http://sbml.org for more
## information about SBML, and the latest version of libSBML.
##
## Copyright (C) 2013-2014 jointly by the following organizations:
##     1. California Institute of Technology, Pasadena, CA, USA
##     2. EMBL European Bioinformatics Institute (EMBL-EBI), Hinxton, UK
##     3. University of Heidelberg, Heidelberg, Germany
##
## Copyright (C) 2009-2013 jointly by the following organizations:
##     1. California Institute of Technology, Pasadena, CA, USA
##     2. EMBL European Bioinformatics Institute (EMBL-EBI), Hinxton, UK
##
## Copyright (C) 2006-2008 by the California Institute of Technology,
##     Pasadena, CA, USA
##
## Copyright (C) 2002-2005 jointly by the following organizations:
##     1. California Institute of Technology, Pasadena, CA, USA
##     2. Japan Science and Technology Agency, Japan
##
## This library is free software; you can redistribute it and/or modify it
## under the terms of the GNU Lesser General Public License as published by
## the Free Software Foundation.  A copy of the license agreement is provided
## in the file named "LICENSE.txt" included with this software distribution
## and also available online as http://sbml.org/software/libsbml/license.html
## ------------------------------------------------------------------------ -->


# -----------------------------------------------------------------------------
# Configuration variables
# -----------------------------------------------------------------------------
# Some of the following are substituted automatically by `configure'.  If
# you are looking at "Makefile", do not edit these values; instead, run the
# configure script at the top level of the src tree.  It will recreate
# "Makefile".

include @top_srcdir@/config/makefile-common-vars.mk

# `srcdir' points to the current directory, but should be set by configure.
# `subdir' must be set manually to the relative dir under `srcdir'.  Don't
# set `subdir' to an absolute path, or some make actions will fail.

srcdir  = @srcdir@
thisdir = .

# Variables `examples' and `xml-schemas' are local variables reused below.
# SK removed xml-schema files

examples =                                                          \
  examples/README.txt                                               \
  examples/CMakeLists.txt                                           \
  examples/layout-package.cmake                                     \
  examples/c/CMakeLists.txt                                         \
  examples/c++/CMakeLists.txt                                       \
  examples/csharp/CMakeLists.txt                                    \
  examples/java/CMakeLists.txt                                      \
  examples/c/FormulaGraphvizFormatter.h                             \
  examples/c/Makefile.in                                            \
  examples/c/addCVTerms.c                                           \
  examples/c/addingEvidenceCodes_1.c                                \
  examples/c/addingEvidenceCodes_2.c                                \
  examples/c/addModelHistory.c                                      \
  examples/c/appendAnnotation.c                                     \
  examples/c/convertSBML.c                                          \
  examples/c/createExampleSBML.c                                    \
  examples/c/drawMath.c                                             \
  examples/c/echoSBML.c                                             \
  examples/c/evaluateMath.c                                         \
  examples/c/printAnnotation.c                                      \
  examples/c/printMath.c                                            \
  examples/c/printNotes.c                                           \
  examples/c/printRegisteredPackages.c                              \
  examples/c/printSBML.c                                            \
  examples/c/printSupported.c                                       \
  examples/c/printUnits.c                                           \
  examples/c/promoteParameters.c                                    \
  examples/c/readSBML.c                                             \
  examples/c/stripPackage.c                                         \
  examples/c/translateMath.c                                        \
  examples/c/translateL3Math.c                                      \
  examples/c/util.c                                                 \
  examples/c/util.h                                                 \
  examples/c/validateSBML.c                                         \
  examples/c/unsetNotes.c                                           \
  examples/c/unsetAnnotation.c                                      \
  examples/c++/Makefile.in                                          \
  examples/c++/addCVTerms.cpp                                       \
  examples/c++/addCustomValidator.cpp                               \
  examples/c++/renameSId.cpp                                        \
  examples/c++/setIdFromNames.cpp                                   \
  examples/c++/setNamesFromIds.cpp                                  \
  examples/c++/addModelHistory.cpp                                  \
  examples/c++/addingEvidenceCodes_1.cpp                            \
  examples/c++/addingEvidenceCodes_2.cpp                            \
  examples/c++/appendAnnotation.cpp                                 \
  examples/c++/callExternalValidator.cpp                            \
  examples/c++/convertSBML.cpp                                      \
  examples/c++/createExampleSBML.cpp                                \
  examples/c++/echoSBML.cpp                                         \
  examples/c++/getAllElementsWithNotes.cpp                          \
  examples/c++/inferUnits.cpp                                       \
  examples/c++/inlineFunctionDefintions.cpp                         \
  examples/c++/convertReactions.cpp                                 \
  examples/c++/printAnnotation.cpp                                  \
  examples/c++/printMath.cpp                                        \
  examples/c++/printNotes.cpp                                       \
  examples/c++/printRegisteredPackages.cpp                          \
  examples/c++/printSBML.cpp                                        \
  examples/c++/printSupported.cpp                                   \
  examples/c++/printUnits.cpp                                       \
  examples/c++/promoteParameters.cpp                                \
  examples/c++/readSBML.cpp                                         \
  examples/c++/rngvalidator.cpp                                     \
  examples/c++/stripPackage.cpp                                     \
  examples/c++/translateMath.cpp                                    \
  examples/c++/translateL3Math.cpp                                  \
  examples/c++/unsetAnnotation.cpp                                  \
  examples/c++/unsetNotes.cpp                                       \
  examples/c++/util.c                                               \
  examples/c++/util.h                                               \
  examples/c++/validateSBML.cpp                                     \
  examples/c++/layout/CMakeLists.txt                                \
  examples/c++/layout/Makefile.in                                   \
  examples/c++/layout/addLayout.cpp                                 \
  examples/c++/layout/convertLayout.cpp                             \
  examples/c++/layout/example1.cpp                                  \
  examples/c++/layout/example1-L3.cpp                               \
  examples/c++/layout/example2.cpp                                  \
  examples/c++/layout/example2-L3.cpp                               \
  examples/c++/layout/example3.cpp                                  \
  examples/c++/layout/example3-L3.cpp                               \
  examples/xslt/layout/layout2svg.xsl                               \
  examples/layout/README.txt                                        \
  examples/csharp/Makefile.in                                       \
  examples/csharp/addCustomValidator.cs                             \
  examples/csharp/addCVTerms.cs                                     \
  examples/csharp/addingEvidenceCodes_1.cs                          \
  examples/csharp/addingEvidenceCodes_2.cs                          \
  examples/csharp/addModelHistory.cs                                \
  examples/csharp/appendAnnotation.cs                               \
  examples/csharp/callExternalValidator.cs                          \
  examples/csharp/convertSBML.cs                                    \
  examples/csharp/createExampleSBML.cs                              \
  examples/csharp/echoSBML.cs                                       \
  examples/csharp/printAnnotation.cs                                \
  examples/csharp/printMath.cs                                      \
  examples/csharp/printNotes.cs                                     \
  examples/csharp/printRegisteredPackages.cs                        \
  examples/csharp/printSBML.cs                                      \
  examples/csharp/printsupported.cs                                 \
  examples/csharp/printUnits.cs                                     \
  examples/csharp/promoteParameters.cs                              \
  examples/csharp/readSBML.cs                                       \
  examples/csharp/stripPackage.cs                                   \
  examples/csharp/translateMath.cs                                  \
  examples/csharp/unsetAnnotation.cs                                \
  examples/csharp/unsetNotes.cs                                     \
  examples/csharp/validateSBML.cs                                   \
  examples/csharp/SetIdFromNames.cs                                 \
  examples/csharp/GetAllElementsWithNotes.cs                        \
  examples/csharp/inlineInitialAssignments.cs                       \
  examples/csharp/replaceOneFD.cs                                   \
  examples/csharp/evaluateCustomMath.cs                             \
  examples/java/Makefile.in                                         \
  examples/java/README.txt                                          \
  examples/java/addCustomValidator.java                             \
  examples/java/addCVTerms.java                                     \
  examples/java/addingEvidenceCodes_1.java                          \
  examples/java/addingEvidenceCodes_2.java                          \
  examples/java/addModelHistory.java                                \
  examples/java/appendAnnotation.java                               \
  examples/java/callExternalValidator.java                          \
  examples/java/convertSBML.java                                    \
  examples/java/createExampleSBML.java                              \
  examples/java/echoSBML.java                                       \
  examples/java/evaluateMath.java                                   \
  examples/java/getAllElementsWithNotes.java                        \
  examples/java/printAnnotation.java                                \
  examples/java/printMath.java                                      \
  examples/java/printNotes.java                                     \
  examples/java/printRegisteredPackages.java                        \
  examples/java/printSBML.java                                      \
  examples/java/printsupported.java                                 \
  examples/java/printUnits.java                                     \
  examples/java/promoteParameters.java                              \
  examples/java/readSBML.java                                       \
  examples/java/stripPackage.java                                   \
  examples/java/setIdFromNames.java                                 \
  examples/java/translateMath.java                                  \
  examples/java/unsetAnnotation.java                                \
  examples/java/unsetNotes.java                                     \
  examples/java/validateSBML.java                                   \
  examples/java/inlineInitialAssignments.java                       \
  examples/java/replaceOneFD.java                                   \
  examples/java/evaluateCustomMath.java                             \
  examples/java/layout/CMakeLists.txt                               \
  examples/java/layout/layout_example1.java                         \
  examples/java/layout/layout_example1_L3.java                      \
  examples/javascript/addCVTerms.js                                 \
  examples/javascript/addingEvidenceCodes_1.js                      \
  examples/javascript/addingEvidenceCodes_2.js                      \
  examples/javascript/addModelHistory.js                            \
  examples/javascript/appendAnnotation.js                           \
  examples/javascript/callExternalValidator.js                      \
  examples/javascript/convertSBML.js                                \
  examples/javascript/createExampleSBML.js                          \
  examples/javascript/echoSBML.js                                   \
  examples/javascript/printAnnotation.js                            \
  examples/javascript/printMath.js                                  \
  examples/javascript/printNotes.js                                 \
  examples/javascript/printRegisteredPackages.js                    \
  examples/javascript/printSBML.js                                  \
  examples/javascript/printsupported.js                             \
  examples/javascript/printUnits.js                                 \
  examples/javascript/promoteParameters.js                          \
  examples/javascript/readSBML.js                                   \
  examples/javascript/stripPackage.js                               \
  examples/javascript/translateMath.js                              \
  examples/javascript/unsetAnnotation.js                            \
  examples/javascript/unsetNotes.js                                 \
  examples/javascript/validateSBML.js                               \
  examples/perl/layout/example1-L3.pl                               \
  examples/ruby/layout/example1-L3.rb                               \
  examples/csharp/layout/CMakeLists.txt                             \
  examples/csharp/layout/example1-L3.cs                             \
  examples/python/layout/example1-L3.py                             \
  examples/python/layout/convertLayout.py                           \
  examples/python/layout/example1.py                                \
  examples/perl/addCVTerms.pl                                       \
  examples/perl/addCustomValidator.pl                               \
  examples/perl/addingEvidenceCodes_1.pl                            \
  examples/perl/addingEvidenceCodes_2.pl                            \
  examples/perl/addModelHistory.pl                                  \
  examples/perl/appendAnnotation.pl                                 \
  examples/perl/callExternalValidator.pl                            \
  examples/perl/convertSBML.pl                                      \
  examples/perl/createExampleSBML.pl                                \
  examples/perl/echoSBML.pl                                         \
  examples/perl/stripPackage.pl                                     \
  examples/perl/evaluateMath.pl                                     \
  examples/perl/extractReactionInfo.pl                              \
  examples/perl/extractReactions.pl                                 \
  examples/perl/printAnnotation.pl                                  \
  examples/perl/printMath.pl                                        \
  examples/perl/printNotes.pl                                       \
  examples/perl/printRegisteredPackages.pl                          \
  examples/perl/printSBML.pl                                        \
  examples/perl/printsupported.pl                                   \
  examples/perl/printUnits.pl                                       \
  examples/perl/promoteParameters.pl                                \
  examples/perl/readSBML.pl                                         \
  examples/perl/translateMath.pl                                    \
  examples/perl/unsetAnnotation.pl                                  \
  examples/perl/unsetNotes.pl                                       \
  examples/perl/validateSBML.pl                                     \
  examples/python/addCustomValidator.py                             \
  examples/python/addCVTerms.py                                     \
  examples/python/addingEvidenceCodes_1.py                          \
  examples/python/addingEvidenceCodes_2.py                          \
  examples/python/addModelHistory.py                                \
  examples/python/appendAnnotation.py                               \
  examples/python/callExternalValidator.py                          \
  examples/python/convertSBML.py                                    \
  examples/python/createExampleSBML.py                              \
  examples/python/createSimpleModel.py                              \
  examples/python/getAllElementsWithNotes.py                        \
  examples/python/echoSBML.py                                       \
  examples/python/stripPackage.py                                   \
  examples/python/printAnnotation.py                                \
  examples/python/printMath.py                                      \
  examples/python/printNotes.py                                     \
  examples/python/printRegisteredPackages.py                        \
  examples/python/printSBML.py                                      \
  examples/python/printsupported.py                                 \
  examples/python/printUnits.py                                     \
  examples/python/promoteParameters.py                              \
  examples/python/readSBML.py                                       \
  examples/python/setIdFromNames.py                                 \
  examples/python/translateMath.py                                  \
  examples/python/unsetAnnotation.py                                \
  examples/python/unsetNotes.py                                     \
  examples/python/validateSBML.py                                   \
  examples/python/inlineInitialAssignments.py                       \
  examples/python/replaceOneFD.py                                   \
  examples/python/evaluateCustomMath.py                             \
  examples/r/addCVTerms.R                                           \
  examples/r/addModelHistory.R                                      \
  examples/r/addingEvidenceCodes_1.R                                \
  examples/r/addingEvidenceCodes_2.R                                \
  examples/r/appendAnnotation.R                                     \
  examples/r/convertSBML.R                                          \
  examples/r/createExampleSBML.R                                    \
  examples/r/echoSBML.R                                             \
  examples/r/evaluateMath.R                                         \
  examples/r/printAnnotation.R                                      \
  examples/r/printMath.R                                            \
  examples/r/printNotes.R                                           \
  examples/r/printRegisteredPackages.R                              \
  examples/r/printSBML.R                                            \
  examples/r/printSupported.R                                       \
  examples/r/printUnits.R                                           \
  examples/r/promoteParameters.R                                    \
  examples/r/readSBML.R                                             \
  examples/r/stripPackage.R                                         \
  examples/r/translateMath.R                                        \
  examples/r/unsetAnnotation.R                                      \
  examples/r/unsetNotes.R                                           \
  examples/r/validateSBML.R                                         \
  examples/ruby/addCustomValidator.rb                               \
  examples/ruby/addCVTerms.rb                                       \
  examples/ruby/addingEvidenceCodes_1.rb                            \
  examples/ruby/addingEvidenceCodes_2.rb                            \
  examples/ruby/addModelHistory.rb                                  \
  examples/ruby/appendAnnotation.rb                                 \
  examples/ruby/callExternalValidator.rb                            \
  examples/ruby/convertSBML.rb                                      \
  examples/ruby/createExampleSBML.rb                                \
  examples/ruby/stripPackage.rb                                     \
  examples/ruby/echoSBML.rb                                         \
  examples/ruby/printAnnotation.rb                                  \
  examples/ruby/printMath.rb                                        \
  examples/ruby/printNotes.rb                                       \
  examples/ruby/printRegisteredPackages.rb                          \
  examples/ruby/printSBML.rb                                        \
  examples/ruby/printsupported.rb                                   \
  examples/ruby/printUnits.rb                                       \
  examples/ruby/promoteParameters.rb                                \
  examples/ruby/readSBML.rb                                         \
  examples/ruby/translateMath.rb                                    \
  examples/ruby/unsetAnnotation.rb                                  \
  examples/ruby/unsetNotes.rb                                       \
  examples/ruby/validateSBML.rb                                     \
  examples/sample-models/README.txt                                 \
  examples/sample-models/from-spec/level-2/README.txt               \
  examples/sample-models/from-spec/level-2/algebraicrules.xml       \
  examples/sample-models/from-spec/level-2/assignmentrules.xml      \
  examples/sample-models/from-spec/level-2/boundarycondition.xml    \
  examples/sample-models/from-spec/level-2/delay.xml                \
  examples/sample-models/from-spec/level-2/dimerization.xml         \
  examples/sample-models/from-spec/level-2/enzymekinetics.xml       \
  examples/sample-models/from-spec/level-2/events.xml               \
  examples/sample-models/from-spec/level-2/functiondef.xml          \
  examples/sample-models/from-spec/level-2/multicomp.xml            \
  examples/sample-models/from-spec/level-2/overdetermined.xml       \
  examples/sample-models/from-spec/level-2/twodimensional.xml       \
  examples/sample-models/from-spec/level-2/units.xml                \
  examples/sample-models/from-spec/level-3/README.txt               \
  examples/sample-models/from-spec/level-3/algebraicrules.xml       \
  examples/sample-models/from-spec/level-3/assignmentrules.xml      \
  examples/sample-models/from-spec/level-3/boundarycondition.xml    \
  examples/sample-models/from-spec/level-3/conversionfactor1.xml    \
  examples/sample-models/from-spec/level-3/delay.xml                \
  examples/sample-models/from-spec/level-3/dimerization.xml         \
  examples/sample-models/from-spec/level-3/enzymekinetics.xml       \
  examples/sample-models/from-spec/level-3/events.xml               \
  examples/sample-models/from-spec/level-3/fullydeterminedevent.xml \
  examples/sample-models/from-spec/level-3/functiondef.xml          \
  examples/sample-models/from-spec/level-3/membrane.xml             \
  examples/sample-models/from-spec/level-3/multicomp.xml            \
  examples/sample-models/from-spec/level-3/overdetermined.xml       \
  examples/sample-models/from-spec/level-3/twoalgebraicrules.xml    \
  examples/sample-models/from-spec/level-3/twodimensional.xml       \
  examples/sample-models/from-spec/level-3/conversionfactor2.xml

# The files listed in 'r bindings' have to be included the dist files, even
# though they can't be created by gnumake.

rbindings =                                           \
  src/bindings/r/CMakeLists.txt                       \
  src/bindings/r/create_package.cmake                 \
  src/bindings/r/configure                            \
  src/bindings/r/configure.in                         \
  src/bindings/r/configure.win                        \
  src/bindings/r/Makevars.in                          \
  src/bindings/r/Makevars.win                         \
  src/bindings/r/swig-binding.cmake                   \
  src/bindings/r/DESCRIPTION.in                       \
  src/bindings/r/NAMESPACE                            \
  src/bindings/r/libsbml.i                            \
  src/bindings/r/local-downcast-extension-layout.cpp  \
  src/bindings/r/local-downcast-extension.cpp.in      \
  src/bindings/r/local-downcast-namespaces-layout.cpp \
  src/bindings/r/local-downcast-namespaces.cpp.in     \
  src/bindings/r/local-downcast-packages-layout.cpp   \
  src/bindings/r/local-downcast-converters.cpp.in     \
  src/bindings/r/local-downcast-converters-layout.cpp \
  src/bindings/r/local-downcast-plugins-layout.cpp    \
  src/bindings/r/local-downcast-plugins.cpp.in        \
  src/bindings/r/local-downcast.cpp.in                \
  src/bindings/r/create-r-package.cmake               \
  src/bindings/r/cmake-r-install.cmake.in             \
  src/bindings/r/libsbml_rtype.swg                    \
  src/bindings/r/local-layout.i                       \
  src/bindings/r/local-packages.i.in                  \
  src/bindings/r/local.cpp                            \
  src/bindings/r/local.i                              \
  src/bindings/r/patch-swig-file.cmake

# The files listed in 'javscript bindings' have to be included the dist files, even
# though they can't be created by gnumake.

jsbindings =                                                   \
  src/bindings/javascript/binding.gyp.in                       \
  src/bindings/javascript/CMakeLists.txt                       \
  src/bindings/javascript/compile-native-files.cmake           \
  src/bindings/javascript/libsbml.i                            \
  src/bindings/javascript/local.cpp                            \
  src/bindings/javascript/local-downcast-converters.cpp.in     \
  src/bindings/javascript/local-downcast-converters-layout.cpp \
  src/bindings/javascript/local-downcast.cpp.in                \
  src/bindings/javascript/local-downcast-extension.cpp.in      \
  src/bindings/javascript/local-downcast-extension-layout.cpp  \
  src/bindings/javascript/local-downcast-namespaces.cpp.in     \
  src/bindings/javascript/local-downcast-namespaces-layout.cpp \
  src/bindings/javascript/local-downcast-packages-layout.cpp   \
  src/bindings/javascript/local-downcast-plugins.cpp.in        \
  src/bindings/javascript/local-downcast-plugins-layout.cpp    \
  src/bindings/javascript/local.i                              \
  src/bindings/javascript/local-layout.i                       \
  src/bindings/javascript/local-packages.i.in                  \


# The files listed in `docs' are copied to the documentation directory
# during a `make install'.

docs =         \
  AUTHORS.txt  \
  COPYING.html \
  COPYING.txt  \
  FUNDING.txt  \
  LICENSE.txt  \
  LICENSE.html \
  NEWS.txt     \
  OLD_NEWS.txt \
  README.txt   \
  VERSION.txt  \
  $(examples)


# Variables `subdirs', `headers', `sources', `libraries', `extra_CPPFLAGS',
# `extra_CXXFLAGS', `extra_LDFLAGS', `extra_clean', and `distfiles' are
# used by the default rules in `makefile-common-actions.mk' included at the
# end.

subdirs = src docs macosx

# `distfile' is the list of files used for creating distributions,
# something that only the libSBML developers should do.  The list of files
# here is in addition to the subdirectories listed in `subdirs'.  The
# latter are the object of `make dist' and the files that are collected
# are under the control of the makefiles in the subdirectories.

distfiles =                         \
  AUTHORS.txt                       \
  COPYING.html                      \
  COPYING.txt                       \
  FUNDING.txt                       \
  LICENSE.txt                       \
  LICENSE.html                      \
  Makefile.in                       \
  OLD_NEWS.txt                      \
  NEWS.txt                          \
  README.txt                        \
  VERSION.txt                       \
  VERSION_PACKAGES.ac               \
  aclocal.m4                        \
  acinclude.m4                      \
  config/chk_swig_version.sh.in     \
  config/config.guess               \
  config/config.sub                 \
  config/doxygen.m4                 \
  config/expat.m4                   \
  config/install-sh                 \
  config/java.m4                    \
  config/libcheck.m4                \
  config/libxml.m4                  \
  config/dolt.m4                    \
  config/ltmain.sh                  \
  config/libtool.m4                 \
  config/lt_link_helper.sh.in       \
  config/machine.m4                 \
  config/makefile-common-actions.mk \
  config/makefile-common-vars.mk.in \
  config/matlab.m4                  \
  config/missing                    \
  config/mkinstalldirs              \
  config/mkoctfile_wrapper.sh.in    \
  config/octave.m4                  \
  config/perl.m4                    \
  config/platform.m4                \
  config/printJavaDataModel.java    \
  config/python.m4                  \
  config/ruby.m4                    \
  config/csharp.m4                  \
  config/runldpath.m4               \
  config/swig.m4                    \
  config/xercesc.m4                 \
  config/zlib.m4                    \
  config/bzip2.m4                   \
  configure                         \
  configure.ac                      \
  libsbml.spec.in                   \
  cmake_uninstall.cmake.in          \
  CMakeLists.txt                    \
  common.cmake                      \
  layout-package.cmake              \
  $(examples)                       \
  $(jsbindings)                     \
  $(rbindings)

# The files listed in `extra_distclean' are items created by configure or
# make, and that are removed by the default rules for `make distclean' in
# makefile-common-actions.mk.

extra_distclean = config.status config.cache config.log autom4te.cache \
	src/sbml/common/config.h src/sbml/common/stamp-h1 config/lt_link_helper.sh \
	config/mkoctfile_wrapper.sh libtool doltlibtool doltcompile \
	config/makefile-common-vars.mk config/chk_swig_version.sh \
	examples/c/Makefile examples/c++/Makefile examples/csharp/Makefile \
	examples/java/Makefile

# It's safer to remove and recreate the copy of the include files (in the
# 'include' directory) after a make clean.  Previously we did it in a make
# distclean only, but I've run into situations where the copy didn't get
# updated.  This is a bit of a sledgehammer, but it's not too bad.

extra_clean = include libsbml.pc libsbml.spec config/*.class

ifeq "$(HOST_TYPE)" "cygwin"
  extra_clean += libsbml.la
endif

# Misc things used later below.

define nodoxygen

  Cannot create manuals, either because libSBML was not
  configured using --with-doxygen, or 'doxygen' cannot be found, or
  the version of 'doxygen' found is too old.  Please reconfigure with
  a suitable value for the configuration flag --with-doxygen
endef


# -----------------------------------------------------------------------------
# Primary build actions.
# -----------------------------------------------------------------------------

# The default rules in `makefile-common-actions.mk' know to interpret goals
# of the form `foo-recursive' to run 'make foo' in directories defined in
# variable `subdirs'.

all: configure Makefile all-recursive libsbml.pc

docs:;
# Only in the case of Java can we make the docs without doxygen.
ifndef USE_JAVA
ifeq "$(USE_DOXYGEN)" ""
# Doxygen hasn't been configured suitably.
	$(error $(nodoxygen))
endif
endif
ifneq "$(MAKEFLAGS)" ""
	$(MAKE) -$(MAKEFLAGS) -w -C docs $(MAKECMDGOALS)
else
	$(MAKE) -w -C docs $(MAKECMDGOALS)
endif

#
# Create a package (.dmg file) for MacOSX
#
# Executing "make create-dmg" will create a
# libsbml-${VERSION}-${XML_PARSER}_macosx-installer.dmg
# in the top directory of source tree.
#
# Install prefix, underlying XML parser (expat, libxml2, or xerces), language
# bindings and etc. are determined by options passed to the configure script.
#
# For example, a created package will install libSBML (depends on expat) as
# universal binaries (i386 and ppc) in /usr/local/ directory (default path)
# with Java and Python bindings if the configure script is run as follows:
#
#  ./configure --with-expat --enable-universal-binary --with-java --with-python
#

create-dmg:
ifneq "$(MAKEFLAGS)" ""
	$(MAKE) -$(MAKEFLAGS) -w -C macosx $(MAKECMDGOALS)
else
	$(MAKE) -w -C macosx $(MAKECMDGOALS)
endif

#
# Create an RPM distribution.
#

create-rpm: libsbml.spec
	rpmbuild -ba libsbml.spec --with java --with csharp --with python \
             --with ruby --with perl --with octave

libsbml.spec: libsbml.spec.in $(TOP_SRCDIR)/configure \
	     $(TOP_SRCDIR)/config/makefile-common-vars.mk
	cd $(TOP_BUILDDIR) && $(SHELL) ./config.status $@


# -----------------------------------------------------------------------------
# Checking.
# -----------------------------------------------------------------------------

check: all check-recursive


# -----------------------------------------------------------------------------
# Tags.
# -----------------------------------------------------------------------------

tags: etags-recursive ctags-recursive


# -----------------------------------------------------------------------------
# libsbml.pc.
# -----------------------------------------------------------------------------

base-libs = -lsbml -lstdc++ -lm

COMPRESS_CPFLAGS    = ${ZLIB_CPPFLAGS} ${BZ2_CPPFLAGS}
COMPRESS_LDFLAGS    = ${ZLIB_LDFLAGS} ${BZ2_LDFLAGS}
COMPRESS_LIBS       = ${ZLIB_LIBS} ${BZ2_LIBS}

XML_CPFLAGS         = ${XERCES_CPPFLAGS} ${EXPAT_CPPFLAGS} ${LIBXML_CPPFLAGS}
XML_LDFLAGS         = ${XERCES_LDFLAGS} ${EXPAT_LDFLAGS} ${LIBXML_LDFLAGS}
XML_LIBS            = ${XERCES_LIBS} ${EXPAT_LIBS} ${LIBXML_LIBS}

DEPENDENCY_CPPFLAGS = ${XML_CPPFLAGS} ${COMPRESS_CPPFLAGS}
DEPENDENCY_LIBFLAGS = ${XML_LDFLAGS} ${COMPRESS_LDFLAGS} ${XML_LIBS} ${COMPRESS_LIBS}

libsbml.pc: Makefile
	@rm -f libsbml.pc
	@echo "Name: @PACKAGE_NAME@"                   > libsbml.pc
	@echo "Description: An API library for reading/writing/manipulating SBML" >> libsbml.pc
	@echo "URL: http://sbml.org/Software/libSBML" >> libsbml.pc
	@echo "Version: @PACKAGE_VERSION@"            >> libsbml.pc
	@echo ""                                      >> libsbml.pc
	@echo "prefix=@prefix@"                       >> libsbml.pc
	@echo "exec_prefix=@exec_prefix@"             >> libsbml.pc
	@echo "libdir=@libdir@"                       >> libsbml.pc
	@echo "includedir=@includedir@"               >> libsbml.pc
	@echo ""                                      >> libsbml.pc
ifdef USE_XERCES
	@echo "Libs: -L\$${libdir} ${DEPENDENCY_LIBFLAGS} ${base-libs}" >> libsbml.pc
	@echo "Cflags: -I\$${includedir} ${DEPENDENCY_CPPFLAGS}" >> libsbml.pc
	@echo "Conflicts: xerces-c = 2.6.0" >> libsbml.pc
endif
ifdef USE_EXPAT
	@echo "Libs: -L\$${libdir} ${DEPENDENCY_LIBFLAGS} ${base-libs}" >> libsbml.pc
	@echo "Cflags: -I\$${includedir} ${DEPENDENCY_CPPFLAGS}"  >> libsbml.pc
endif
ifdef USE_LIBXML
	@echo "Libs: -L\$${libdir} ${DEPENDENCY_LIBFLAGS} ${base-libs}" >> libsbml.pc
	@echo "Cflags: -I\$${includedir} ${DEPENDENCY_CPPFLAGS}"        >> libsbml.pc
	@echo "Requires: libxml-2.0 >= 2.6.22" >> libsbml.pc
endif


# -----------------------------------------------------------------------------
# Installation.
# -----------------------------------------------------------------------------

define install-linux-warning-msg

  The installation of libSBML is finished.  On certain platforms
  (such as Linux), you will also need to do one of the following:
  1) run 'ldconfig' (see the man page if this is unfamiliar)
  2) set the LD_LIBRARY_PATH (or equivalent) environment variable
  to contain the path "$(DESTDIR)$(LIBDIR)" so that programs can
  find the libSBML library at run-time.

endef
define install-darwin-warning-msg

  The installation of libSBML is finished.  To use the library, you
  may also need to set your DYLD_LIBRARY_PATH environment to contain
  the path "$(DESTDIR)$(LIBDIR)" so that programs can find the
  libSBML library at run-time.

endef
define uninstall-warning-msg

  Uninstallation complete.  WARNING: if you have run libSBML's 'configure'
  utility since the time of the last installation of libSBML on this computer,
  the uninstallation just performed may not have removed all of the libSBML
  files.  The 'make uninstall' command only knows about the files installed
  by libSBML according to its MOST RECENT CONFIGURATION.

endef

install: all install-recursive install-warnings install-pc

# Only in the case of Java can we make the docs without doxygen.
ifdef USE_JAVA
install-docs: install-docs-recursive
else
ifeq "$(USE_DOXYGEN)" ""
# Doxygen hasn't been configured suitably.
install-docs:
	$(error $(nodoxygen))
else
install-docs: install-docs-recursive
endif
endif

installcheck: installcheck-recursive

install-warnings:
ifeq "$(HOST_TYPE)" "darwin"
	$(warning $(install-darwin-warning-msg))
else
	$(warning $(install-linux-warning-msg))
endif

install-pc: libsbml.pc
	$(INSTALL_SH) libsbml.pc -m 0644 "$(DESTDIR)$(LIBDIR)/pkgconfig/libsbml.pc"

uninstall: uninstall-recursive uninstall-libsbml-pc
	@if test -d "$(DESTDIR)$(LIBDIR)"; then \
	  if test -n "`find $(DESTDIR)$(LIBDIR) -maxdepth 0 -empty`"; then \
	    echo rmdir "$(DESTDIR)$(LIBDIR)"; \
	    rmdir "$(DESTDIR)$(LIBDIR)"; \
	  else \
	    echo "Directory $(DESTDIR)$(LIBDIR) not empty; leaving it alone"; \
	  fi; \
	fi; \
	if test -d "$(DESTDIR)$(INCLUDEDIR)"; then \
	  if test -n "`find $(DESTDIR)$(INCLUDEDIR) -maxdepth 0 -empty`"; then \
	    echo rmdir "$(DESTDIR)$(INCLUDEDIR)"; \
	    rmdir "$(DESTDIR)$(INCLUDEDIR)"; \
	  else \
	    echo "Directory $(DESTDIR)$(INCLUDEDIR) not empty; leaving it alone"; \
	  fi; \
	fi; \
	if test -d "$(DESTDIR)"; then \
	  if test -n "`find $(DESTDIR) -maxdepth 0 -empty`"; then \
	    echo rmdir "$(DESTDIR)"; \
	    rmdir "$(DESTDIR)"; \
	  else \
	    echo "Directory $(DESTDIR) not empty; leaving it alone"; \
	  fi; \
	fi;
	$(warning $(uninstall-warning-msg))

uninstall-libsbml-pc:
	@target="$(DESTDIR)$(LIBDIR)/pkgconfig/libsbml.pc"; \
	if test -f $$target ; then \
	  echo rm $$target; \
	  rm $$target; \
	fi; \
	if test -d "$(DESTDIR)$(LIBDIR)/pkgconfig"; then \
	  if test -n "`find $(DESTDIR)$(LIBDIR) -maxdepth 0 -empty`"; then \
	    echo rmdir "$(DESTDIR)$(LIBDIR)/pkgconfig"; \
	    rmdir "$(DESTDIR)$(LIBDIR)/pkgconfig"; \
	  else \
	    echo "Directory $(DESTDIR)$(LIBDIR)/pkgconfig not empty; leaving it alone"; \
	  fi; \
	fi;

# -----------------------------------------------------------------------------
# Cleaning.
# -----------------------------------------------------------------------------

clean: clean-normal clean-recursive

distclean: distclean-normal distclean-recursive

mostlyclean: mostlyclean-normal mostlyclean-recursive

maintainer-clean: maintainer-clean-normal maintainer-clean-recursive


# -----------------------------------------------------------------------------
# Creating distribution (for libSBML maintainers only)
# -----------------------------------------------------------------------------

# The `make dist' command is only available from this top-level makefile.

touch_distdir = \
  { find "$(archive_basename)" -print0 | xargs -0 gtouch -d '1 day ago'; }

remove_distdir = \
  { test ! -d $(DISTDIR) \
    || { find $(DISTDIR) -type d ! -perm -200 -exec chmod u+w {} ';' \
         && rm -fr $(DISTDIR); }; }

# Don't use GNU make's $(basename ...) command in the following; it behaves
# differently in a critical way (specifically, in its handling of dots).

archive_basename = $(shell basename $(DISTDIR))
tar_archive      = $(archive_basename)-src.tar.gz
zip_archive      = $(archive_basename)-src.zip

dist: dist-all dist-gzip dist-zip
	if test -d $(DISTDIR); then \
	  $(remove_distdir); \
	fi

TAR := $(shell gnutar --version 2>/dev/null)
ifdef TAR
  TAR:=gnutar
else
  TAR:=tar
endif

dist-gzip: config-check dist-all
	if test -d $(DISTDIR); then \
	  $(TAR) -C $(DISTDIR)/.. -czf $(tar_archive) $(notdir $(DISTDIR)); \
	fi

# The dependency on dist-gzip is to make sure that one is done first, because
# this one resets the file time stamps before creating the archive:

dist-zip: dist-gzip
	if test -d $(DISTDIR); then				\
	  cd $(DISTDIR)/..;					\
	  $(touch_distdir);                                     \
	  zip -Xyvr9  $(zip_archive) "$(archive_basename)";     \
	fi

# For `make dist' to work properly, we need the developer to configure
# libsbml with certain flags, so that certain auto-generated files are
# present when `make dist' runs and looks for them.

# 2009-01-02 Lisp is now disabled, and thus not in the list below.

check_vars_list = USE_JAVA USE_PYTHON USE_PERL USE_RUBY USE_CSHARP
num_vars        = $(words $(check_vars_list))
num_vars_set    = $(words $(foreach var,$(check_vars_list),$($(var))))

config-check:
	@if test $(num_vars_set) != $(num_vars); then \
	  echo "Please reconfigure with options $(check_vars_list)"; \
	  echo "before running 'make dist'"; \
	  exit 2; \
	fi

dist-all: $(distfiles)
ifneq "$(MAKEFLAGS)" ""
	$(MAKE) -$(MAKEFLAGS) all
else
	$(MAKE) all
endif
	-rm -f $(tar_archive) $(zip_archive)
	@$(remove_distdir)
	mkdir -p $(DISTDIR)
	@list='$(distfiles)'; for file in $$list; do \
	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
	  if test "$$dir" != "$$file" && test "$$dir" != "."; then \
	    dir="$$dir"; \
	    $(MKINSTALLDIRS) "$(DISTDIR)/$$dir"; \
	  else \
	    dir=''; \
	  fi; \
	  if test -d $$d/$$file; then \
	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
	      cp -pR $(srcdir)/$$file $(DISTDIR)/$$dir || exit 1; \
	    fi; \
	    cp -pR $$d/$$file $(DISTDIR)/$$dir || exit 1; \
	  else \
	    test -f $(DISTDIR)/$$file \
	    || cp -p $$d/$$file $(DISTDIR)/$$file \
	    || exit 1; \
	  fi; \
	done
	@list='$(subdirs)'; for subdir in $$list; do \
	  if test "$$subdir" = .; then :; else \
	    test -d $(DISTDIR)/$$subdir \
	    || mkdir $(DISTDIR)/$$subdir \
	    || exit 1; \
	    $(MAKE) -$(MAKEFLAGS) -C $$subdir \
	        TOP_DISTDIR="$(TOP_DISTDIR)" \
	        DISTDIR=$(DISTDIR) \
	        dist \
	      || exit 1; \
	  fi; \
	done
	-@find $(DISTDIR) -type d ! -perm -777 -exec chmod a+rwx {} \; -o \
	  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
	  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
	  ! -type d ! -perm -444 -exec $(SHELL) $(INSTALL_SH) -c -m a+r {} {} \; \
	|| chmod -R a+r $(DISTDIR)

docs_tar_archive = $(archive_basename)-docs.tar.gz
docs_zip_archive = $(archive_basename)-docs.zip

docs_archive_contents =		    \
	docs/*.txt		    \
	docs/*.html		    \
	docs/*.docx		    \
	docs/*.pdf		    \
	docs/.graphics		    \
	docs/formatted/cpp-api	    \
	docs/formatted/csharp-api   \
	docs/formatted/java-api	    \
	docs/formatted/matlab-api   \
	docs/formatted/octave-api   \
	docs/formatted/python-api

dist-docs:
	make docs
	$(TAR) -czf $(docs_tar_archive) $(docs_archive_contents)
	zip -Xyvr9 $(docs_zip_archive) $(docs_archive_contents)

## This target untars the dist file and tries a VPATH configuration.  Then
## it guarantees that the distribution is self-contained by making another
## tarfile.
#distcheck: dist
#	$(remove_distdir)
#	GZIP=$(gzip_env) gunzip -c $(distdir).tar.gz | $(AMTAR) xf -
#	chmod -R a-w $(distdir); chmod a+w $(distdir)
#	mkdir $(distdir)/=build
#	mkdir $(distdir)/=inst
#	chmod a-w $(distdir)
#	dc_install_base=`$(am__cd) $(distdir)/=inst && pwd` \
#	  && dc_destdir="$${TMPDIR-/tmp}/am-dc-$$$$/" \
#	  && cd $(distdir)/=build \
#	  && ../configure --srcdir=.. --prefix="$$dc_install_base" \
#	    $(DISTCHECK_CONFIGURE_FLAGS) \
#	  && $(MAKE) $(AM_MAKEFLAGS) \
#	  && $(MAKE) $(AM_MAKEFLAGS) dvi \
#	  && $(MAKE) $(AM_MAKEFLAGS) check \
#	  && $(MAKE) $(AM_MAKEFLAGS) install \
#	  && $(MAKE) $(AM_MAKEFLAGS) installcheck \
#	  && $(MAKE) $(AM_MAKEFLAGS) uninstall \
#	  && $(MAKE) $(AM_MAKEFLAGS) distuninstallcheck_dir="$$dc_install_base" \
#	        distuninstallcheck \
#	  && chmod -R a-w "$$dc_install_base" \
#	  && ({ \
#	       (cd ../.. && $(MKINSTALLDIRS) "$$dc_destdir") \
#	       && $(MAKE) $(AM_MAKEFLAGS) DESTDIR="$$dc_destdir" install \
#	       && $(MAKE) $(AM_MAKEFLAGS) DESTDIR="$$dc_destdir" uninstall \
#	       && $(MAKE) $(AM_MAKEFLAGS) DESTDIR="$$dc_destdir" \
#	            distuninstallcheck_dir="$$dc_destdir" distuninstallcheck; \
#	      } || { rm -rf "$$dc_destdir"; exit 1; }) \
#	  && rm -rf "$$dc_destdir" \
#	  && $(MAKE) $(AM_MAKEFLAGS) dist-gzip \
#	  && rm -f $(distdir).tar.gz \
#	  && $(MAKE) $(AM_MAKEFLAGS) distcleancheck
#	$(remove_distdir)
#	@echo "$(distdir).tar.gz is ready for distribution" | \
#	  sed 'h;s/./=/g;p;x;p;x'

#distuninstallcheck:
#	cd $(distuninstallcheck_dir) \
#	&& test `find . -type f -print | wc -l` -le 1 \
#	   || { echo "ERROR: files left after uninstall:" ; \
#	        if test -n "$(DESTDIR)"; then \
#	          echo "  (check DESTDIR support)"; \
#	        fi ; \
#	        find . -type f -print ; \
#	        exit 1; } >&2

#distcleancheck: distclean
#	if test '$(srcdir)' = . ; then \
#	  echo "ERROR: distcleancheck can only run from a VPATH build" ; \
#	  exit 1 ; \
#	fi
#	test `find . -type f -print | wc -l` -eq 0 \
#	  || { echo "ERROR: files left in build directory after distclean:" ; \
#	       find -type f -print ; \
#	       exit 1; } >&2


# -----------------------------------------------------------------------------
# Miscellaneous.
# -----------------------------------------------------------------------------

printJavaDataModel: config/printJavaDataModel.java
	$(JAVAC) config/printJavaDataModel.java


# -----------------------------------------------------------------------------
# Common default rules.
# -----------------------------------------------------------------------------

include @top_srcdir@/config/makefile-common-actions.mk


# -----------------------------------------------------------------------------
# End.
# -----------------------------------------------------------------------------

