<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of molFilesToCDFfile</title>
  <meta name="keywords" content="molFilesToCDFfile">
  <meta name="description" content="Concatenates all the mol files in current folder into a cdf file">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html setupThermoModel --><!-- menu.html groupContribution -->
<h1>molFilesToCDFfile
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>Concatenates all the mol files in current folder into a cdf file</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function metList=molFilesToCDFfile(model,cdfFileName) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Concatenates all the mol files in current folder into a cdf file

 Creates a cdf file, named  cdfFileNam, out of all the mol files in the
 current folder. The cdf file can then be used with the web based
 implementation of the group contribution method to estimate the Standard
 Gibbs energy of formation for a batch of metabolite species
 The web-based implementation of this new group contribution method is
 available free at http://sparta.chem-eng.northwestern.edu/cgi-bin/GCM/WebGCM.cgi.
 The code checks for a .mol file with the filename prefix given by the
 abbreviation in the model, therefore, you should name your own mol files
 accordingly.

INPUT
 model.mets      cell array of metabolite abbreviations corresponding to the mol files
 cdfFileName     name of cdf file

OUTPUT
 model.met(m).molFile  =1 when mol file found, otherwise =0

WRITTEN OUTPUT
 cdfFileName.cdf    cdf file with all the mol files in order of the
                   model metabolite abbreviations

 Ronan M.T. Fleming</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function metList=molFilesToCDFfile(model,cdfFileName)</a>
0002 <span class="comment">% Concatenates all the mol files in current folder into a cdf file</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% Creates a cdf file, named  cdfFileNam, out of all the mol files in the</span>
0005 <span class="comment">% current folder. The cdf file can then be used with the web based</span>
0006 <span class="comment">% implementation of the group contribution method to estimate the Standard</span>
0007 <span class="comment">% Gibbs energy of formation for a batch of metabolite species</span>
0008 <span class="comment">% The web-based implementation of this new group contribution method is</span>
0009 <span class="comment">% available free at http://sparta.chem-eng.northwestern.edu/cgi-bin/GCM/WebGCM.cgi.</span>
0010 <span class="comment">% The code checks for a .mol file with the filename prefix given by the</span>
0011 <span class="comment">% abbreviation in the model, therefore, you should name your own mol files</span>
0012 <span class="comment">% accordingly.</span>
0013 <span class="comment">%</span>
0014 <span class="comment">%INPUT</span>
0015 <span class="comment">% model.mets      cell array of metabolite abbreviations corresponding to the mol files</span>
0016 <span class="comment">% cdfFileName     name of cdf file</span>
0017 <span class="comment">%</span>
0018 <span class="comment">%OUTPUT</span>
0019 <span class="comment">% model.met(m).molFile  =1 when mol file found, otherwise =0</span>
0020 <span class="comment">%</span>
0021 <span class="comment">%WRITTEN OUTPUT</span>
0022 <span class="comment">% cdfFileName.cdf    cdf file with all the mol files in order of the</span>
0023 <span class="comment">%                   model metabolite abbreviations</span>
0024 <span class="comment">%</span>
0025 <span class="comment">% Ronan M.T. Fleming</span>
0026 
0027 <span class="comment">% [nMet,nRxn]=size(model.S);</span>
0028 mets = model.mets;
0029 nMet = length(mets);
0030 noMolFileCount = 0;
0031 <span class="comment">% doneMets = {};</span>
0032 metList = {};
0033 
0034 fid0=fopen([cdfFileName <span class="string">'.cdf'</span>],<span class="string">'w'</span>);
0035 <span class="keyword">for</span> m=1:nMet
0036     metAbbr=mets{m};
0037     metAbbr=metAbbr(1:end-3);
0038     
0039 <span class="comment">%     if ~any(strcmp(metAbbr,doneMets))</span>
0040 <span class="comment">%         doneMets = [doneMets; {metAbbr}];</span>
0041         
0042         fid = fopen([metAbbr <span class="string">'.mol'</span>],<span class="string">'r'</span>);
0043         <span class="keyword">if</span> fid~=-1
0044             metList = [metList; mets(m)]; <span class="comment">% [metList; {metAbbr}];</span>
0045             <span class="keyword">while</span> 1
0046                 tline = fgetl(fid);
0047                 <span class="keyword">if</span> ~ischar(tline)
0048                     <span class="keyword">break</span>
0049                 <span class="keyword">end</span>
0050                 fprintf(fid0,<span class="string">'%s\n'</span>,tline);
0051             <span class="keyword">end</span>
0052             fclose(fid);
0053             fprintf(fid0,<span class="string">'%s\n'</span>,<span class="string">'$$$$'</span>);
0054 <span class="comment">%             model.met(m).molFile=1;</span>
0055         <span class="keyword">else</span>
0056             fprintf(<span class="string">'%s\n'</span>,[<span class="string">'No mol file for '</span> mets{m}]);
0057 <span class="comment">%             model.met(m).molFile=0;</span>
0058             noMolFileCount=noMolFileCount+1;
0059         <span class="keyword">end</span>
0060 <span class="comment">%     end</span>
0061 <span class="keyword">end</span>
0062 fprintf(<span class="string">'%s\n'</span>,[<span class="string">'Percentage of metabolites without mol files: '</span> num2str(noMolFileCount/nMet)]);
0063 fclose(fid0);</pre></div>
<hr><address>Generated on Fri 20-May-2011 17:06:05 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2003</address>
</body>
</html>