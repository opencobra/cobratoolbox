<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="MATLAB R2016a"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><title>Input and output of reconstructions and mdoels </title><style type="text/css">
* {margin: 0; padding: 0;}
body {text-align: start; line-height: 17.234001159668px; min-height: 0px; white-space: normal; color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Menlo, monospace; font-style: normal; font-size: 14px; font-weight: normal; text-decoration: none; white-space: normal; }
h1, h2 {font-weight: normal;}
.content { padding: 30px; }

.S0 { margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S1 { line-height: 26.3999996185303px; min-height: 24px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-size: 22px; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 15px; margin-right: 10px;  }
.S2 { min-height: 0px; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S3 { line-height: 20.576000213623px; min-height: 20px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-size: 16px; font-weight: bold; white-space: pre-wrap; margin-left: 4px; margin-top: 15px; margin-bottom: 9px; margin-right: 10px;  }
.S4 { line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 2px; margin-bottom: 9px; margin-right: 10px;  }
.S5 { font-family: Helvetica, Arial, sans-serif; margin-left: 0px; margin-top: 10px; margin-bottom: 20px; margin-right: 0px;  }
.S6 { text-align: left; line-height: 21px; white-space: pre-wrap; white-space: pre-wrap; margin-left: 56px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S7 { min-height: 0px; font-family: monospace; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S8 { min-height: 0px; color: rgb(0, 95, 206); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S9 { line-height: 20.576000213623px; min-height: 20px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-size: 16px; font-weight: bold; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 9px; margin-right: 10px;  }
.S10 { margin-left: 3px; margin-top: 10px; margin-bottom: 4px; margin-right: 3px;  }
.S11 { line-height: 15.5926675796509px; min-height: 18px; white-space: nowrap; font-size: 12.6666669845581px; white-space: nowrap; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S12 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S13 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(160, 32, 240); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S14 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S15 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(34, 139, 34); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S16 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(0, 0, 255); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S17 { margin-left: 3px; margin-top: 10px; margin-bottom: 10px; margin-right: 3px;  }
.S18 { line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 10px; margin-bottom: 9px; margin-right: 10px;  }
.S19 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(0, 0, 255); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S20 { line-height: 15.5926685333252px; min-height: 0px; white-space: pre; color: rgb(160, 32, 240); font-size: 12.6666679382324px; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 45px;  }
.S21 { color: rgb(64, 64, 64); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }

.LineNodeBlock {margin: 10px 0 10px 0;}
.LineNodeBlock+.paragraphNode {margin-top: 10px;}
.lineNode {padding-left: 10px; background-color: #F7F7F7; border-left: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.inlineWrapper:first-child .lineNode,.inlineWrapper.outputs+.inlineWrapper .lineNode {padding-top: 5px; border-top: 1px solid #E9E9E9;}
.inlineWrapper:last-child .lineNode,.inlineWrapper.outputs .lineNode {padding-bottom: 5px; border-bottom: 1px solid #E9E9E9;}
.lineNode .textBox {white-space: pre;}
.outputGroup {margin: 2px 0 2px 0; padding: 2px 2px 2px 4px;}
.outputRegion {}
.outputParagraph {color: rgba(64, 64, 64, 1); padding: 10px 0 6px 17px; background: white; overflow-x: hidden;}
.inlineWrapper:last-child .outputParagraph {border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;}
.outputParagraph:empty {margin: 0;}
.inlineElement .symbolicElement {margin-top: 1px; margin-bottom: 1px;}
.embeddedOutputsSymbolicElement .MathEquation {margin-top: 4px; margin-bottom: 4px;}
.embeddedOutputsSymbolicElement .MathEquation.displaySymbolicElement {margin-left: 15px;}
.embeddedOutputsSymbolicElement .MathEquation.inlineSymbolicElement {margin-left: 5px;}
.embeddedOutputsSymbolicElement {overflow-x: auto; overflow-y: hidden;}
.embeddedOutputsSymbolicElement { overflow: initial !important;}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px; white-space: pre; word-wrap: initial; min-height: 18px; max-height: 250px; overflow: auto;}
.textElement {padding-top: 3px;}
.embeddedOutputsTextElement.inlineElement,.embeddedOutputsVariableStringElement.inlineElement {}
.inlineElement .textElement {}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement { max-height: none !important; overflow: initial !important;}
.veSpecifier {}
.veContainer {}
.veSpecifierBox {height: 400px; width: 500px;}
.veSpecifier .veTable {padding-top: 3px; padding-bottom: 4px;}
.veSpecifierBox .veSpecifier .veContainer {position: relative; width: 100%; height: 370px;}
.veSpecifierBox .dijitDialogPaneContent {width: 97% !important; height: 88% !important;}
.veSpecifier .veTable .rowHeadersWrapper {padding-bottom: 0;}
.veSpecifier .veTable .scroller .variableEditorRenderers {padding-right: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;}
.veVariableValueSummary {display: inline-block;}
.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {visibility: hidden; z-index: 0;}
.veMetaSummary {font-style: italic;}
.veSpecifier .veTable .scroller {overflow: hidden;}
.veSpecifier .veTable:hover .scroller {overflow: auto;}
.veSpecifier .veVariableName,.veSpecifier .veDimensionFont {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.veSpecifier .veVariableName {padding-top: 2px;}
.veSpecifier .veDimensionFont {font-style: italic; color: #9A9A9A;}
.veSpecifier .scroller::-webkit-scrollbar-track {background-color: white;}
.veSpecifier .scroller::-webkit-scrollbar-corner {background-color: white;}
.veSpecifier .veTable .topRowHeaderWrapper {border: none; background-color: #F8F9FA;}
.veSpecifier .mw_type_ListBase.showCellBorders,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper,.veSpecifier .veTable .verticalScrollSpacer,.veSpecifier .veTable .horizontalScrollSpacer {border: none;}
.veSpecifier .veTable .dataScrollerNode {border: 1px solid #BFBFBF;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode,.veSpecifier .veTable .dataBody {font-family: Arial; font-size: 13px;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode {color: #7F7F7F;}
.veSpecifier .veTable .dataBody {color: #000000;}
.veSpecifier .veTable .columnHeaderNode .cell .drag,.veSpecifier .veTable .columnHeaderNode .cell .header,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {background-color: #F8F9FA;}
.veSpecifier .veTable .columnHeaderNode .cell .dragBorder {border-right: 1px solid #F8F9FA;}
.veSpecifier .veTable .rowHeaderNode .cell {padding-top: 3px; text-align: center; border-bottom: 1px solid #F8F9FA;}
.veSpecifier .veTable .dataBody .cell .plainText {text-align: right;}
.veSpecifier .veTable .dataBody .row .cell {border-bottom: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.embeddedOutputsVariableElement {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; min-height: 18px; max-height: 250px; overflow: auto;}
.variableElement {}
.embeddedOutputsVariableElement.inlineElement {}
.inlineElement .variableElement {}
.variableValue { width: 100% !important; }
.embeddedOutputsMatrixElement {min-height: 18px; box-sizing: border-box; font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.embeddedOutputsMatrixElement .matrixElement{position: relative;}
.matrixElement .variableValue {white-space: pre; display: inline-block; vertical-align: top; overflow: hidden;}
.embeddedOutputsMatrixElement.inlineElement {}
.embeddedOutputsMatrixElement.inlineElement .topHeaderWrapper {display: none;}
.embeddedOutputsMatrixElement.inlineElement .veTable .body {padding-top: 0 !important; max-height: 100px;}
.embeddedOutputsMatrixElement.inlineElement .veVariableName {padding-top: 0;}
.inlineElement .matrixElement {max-height: 300px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer {white-space: nowrap; padding-top: 10px; margin-bottom: 3px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis.hide,.embeddedOutputsMatrixElement .matrixElement .verticalEllipsis.hide {display: none;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis {margin-bottom: -3px;}
.matrixElement { max-height: none !important; }
.dijitTooltipDialog .dijitTooltipContainer .dijitTooltipContents .alertPlugin-alertMessage {min-width: 12px; max-width: 400px; max-height: 300px; overflow: auto;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar {width: 11px; height: 11px;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-track {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-corner {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {border-radius: 7px; background-color: rgba(0, 0, 0, 0.1); border: 2px solid rgba(0, 0, 0, 0); background-clip: padding-box;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0.1);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.alertPlugin-alertLine {position: absolute; display: initial; width: 40px; text-align: right; cursor: text;}
.alertPlugin-onTextLine {visibility: hidden;}
.alertPlugin-hasTooltip .alertPlugin-warningImg,.alertPlugin-hasTooltip .alertPlugin-errorImg {cursor: pointer;}
.alertPlugin-alertLine .alertPlugin-warningElement,.alertPlugin-alertLine .alertPlugin-errorElement {display: inline-block; margin-right: 4px;}
.alertPlugin-isStale {-webkit-filter: opacity(0.4) grayscale(80%); filter: opacity(0.4) grayscale(80%);}
.diagnosticMessage-wrapper {font-family: Consolas, Inconsolata, Menlo, monospace; font-size: 12px;}
.diagnosticMessage-wrapper.diagnosticMessage-warningType {color: rgb(255,100,0);}
.diagnosticMessage-wrapper.diagnosticMessage-warningType a {color: rgb(255,100,0); text-decoration: underline;}
.diagnosticMessage-wrapper.diagnosticMessage-errorType {color: rgb(230,0,0);}
.diagnosticMessage-wrapper.diagnosticMessage-errorType a {color: rgb(230,0,0); text-decoration: underline;}
.diagnosticMessage-wrapper .diagnosticMessage-messagePart {white-space: pre-wrap;}
.diagnosticMessage-wrapper .diagnosticMessage-stackPart {white-space: pre;}
.embeddedOutputsWarningElement{min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsWarningElement.inlineElement {}
.embeddedOutputsErrorElement {min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsErrorElement.inlineElement {}
</style></head><body><div class = "content"><div class = 'SectionBlock containment'><h1 class = "S1"><span class = "S2">Input and output of reconstructions and mdoels </span></h1><h2 class = "S3"><span class = "S2">Author(s): Thomas Pfau, University of Luxembourg</span></h2><h2 class = "S3"><span class = "S2">Reviewers: Catherine Clancy</span></h2><h2 class = "S3"><span class = "S2">INTRODUCTION</span></h2><p class = "S4"><span class = "S2">This tutorial aims at providing information on how to load models into The COBRA Toolbox and export them to other formats.</span></p><h2 class = "S3"><span class = "S2">Available input formats</span></h2><p class = "S4"><span class = "S2">The COBRA Toolbox supports the use of models in multiple formats, including:</span></p><ul class = "S5"><li class = "S6"><span class = "S0">MAT-file format </span></li><li class = "S6"><span class = "S0">Systems Biology Markup Language (SBML) format </span></li><li class = "S6"><span class = "S0">SimPheny format</span></li><li class = "S6"><span class = "S0">Excel format</span></li></ul><p class = "S4"><span class = "S2">The most commonly used model format is a MAT-file (</span><span class = "S7">.mat</span><span class = "S2"> ) format where by a simple MATLAB </span><span class = "S7">struct</span><span class = "S2"> contains one or more of the fields defined in The COBRA Toolbox </span><a href = 'https://opencobra.github.io/cobratoolbox/docs/COBRAModelFields.html'><span class = "S0">Documentation</span></a><span class = "S2">. </span></p><h2 class = "S3"><span class = "S2">MAT-file format</span></h2><p class = "S4"><span class = "S2">A model in a MAT-file format is required to follow the rules defined in The COBRA Toolbox </span><a href = 'https://opencobra.github.io/cobratoolbox/docs/ExcelModelFileDefinition.html'><span class = "S0">Documentation</span></a><span class = "S2">. </span></p><h2 class = "S3"><span class = "S2">SBML format</span></h2><p class = "S4"><span class = "S2">The COBRA Toolbox currently supports models formats of SBML Level 3 version 1 (as defined </span><a href = 'http://sbml.org/Documents/Specifications'><span class = "S0">here</span></a><span class = "S2">) and has legacy support for older versions of SBML. It also supports the Level 3 Flux Balance Constraints (FBC) package (both in version 1 and version 2). </span></p><p class = "S4"><span class = "S2">The COBRA Toolbox will use the provided SBML IDs as IDs for the respective elements of the model structure, and use the name fields as names. It is assumed (but not necessary), that metabolite IDs start with a "M_", reaction IDs start with a "R_" , gene IDs start with a "G_", and compartment IDs start with a "C_". This is due to the limitation on identifiers in SBML and those starting sequences will be removed if they are consistently present in the model. </span></p><p class = "S4"><span class = "S2">Metabolite IDs of the MAT-file format use a metabolite identfier followed by a compartment identifier in square brackets (e.g. ala_L[c]). Since brackets are illegal characters for SBML IDs, The COBRA Toolbox assumes, for all non boundary species, that a compartment identifier preceded by an underscore (e.g. SBML ID: M_ala_L_c) is equivalent to the MAT-file compartment identifiers and converted to a model as such.</span></p><p class = "S4"><span class = "S2">The COBRA Toolbox has a legacy support for the NOTE Fields defined in </span><a href = 'http://www.nature.com/nprot/journal/v6/n9/abs/nprot.2011.308.html'><span class = "S0">Schellenberger et al, Nature Protocols, 2011</span></a><span class = "S2">, but it is suggested to instead use annotations whenever possible. In general, if a fbc-package field and a NOTES field is present, the fbc-package value will be used (e.g. CHARGE for metabolites, or GENE_ASSOCIATION for reactions). The same applies to annotations, i.e. if there is an annotation for an EC number, the Notes field EC Number will be ignored. However, the charge field in SBML Level 2 will be overwritten by the Notes field definitions.</span></p><h2 class = "S3"><span class = "S2">SimPheny format</span></h2><p class = "S4"><span class = "S2">SimPheny models provided in 3 or 4 files (4 if GPR rules are provided). The model identifiers will be used as presented in the SimPheny files.</span></p><h2 class = "S3"><span class = "S2">Excel format</span></h2><p class = "S4"><span class = "S2">A model in a excel file formats are accepted by The COBRA Toolbox if the file adheres to the specifications listed in The COBRA Toolbox </span><a href = 'https://opencobra.github.io/cobratoolbox/docs/ExcelModelFileDefinition.html'><span class = "S0">Documentation</span></a><span class = "S2">. </span></p><h2 class = "S3"><span class = "S2">Available output formats</span></h2><p class = "S4"><span class = "S2">The COBRA Toolbox also allows storage in multiple file types as detailed below.</span></p><h2 class = "S3"><span class = "S2">MAT-files formats</span></h2><p class = "S4"><span class = "S2">The MAT-file (</span><span class = "S7">.mat</span><span class = "S2"> ) format is most commonly used. The MAT-file format make up is a simple MATLAB </span><span class = "S7">struct</span><span class = "S2"> containing one or more of the fields defined in The COBRA Toolbox </span><a href = 'https://opencobra.github.io/cobratoolbox/docs/COBRAModelFields.html'><span class = "S0">Documentation</span></a><span class = "S2">. It has the advantage of lossless data storage even for model specific fields not supported by The COBRA Toolbox.</span></p><h2 class = "S3"><span class = "S2">SBML format </span></h2><p class = "S4"><span class = "S2">SBML is a commonly used format to store biological models. The COBRA Toolbox allows the generation of models using SBML Level 3 Version 1 and uses the FBC-package extension to encode constraint based properties. This is the format that is recommended for publication, as it can be used by many different tools and allows the best use of the model.</span></p><h2 class = "S3"><span class = "S2">Excel format</span></h2><p class = "S4"><span class = "S2">Historically, models were often exchanged using Excel files, and this is still in use today. Some users prefer to have an overview of a model using Excel. The COBRA Toolbox offers an Excel export of the format described in The COBRA Toolbox </span><a href = 'https://opencobra.github.io/cobratoolbox/docs/ExcelModelFileDefinition.html'><span class = "S0">Documentation</span></a><span class = "S2">.</span></p><h2 class = "S3"><span class = "S2">Text Format</span></h2><p class = "S4"><span class = "S2">Finally, The COBRA Toolbox offers a simple textual export, which is essentially a tab separated file containing the reactions with their reaction formulas along with the associated GPRs, but no further information. This format only uses the required fields and will ignore any optional fields.</span></p></div><p class = "S0"></p><div class = 'SectionBlock containment'><h2 class = "S9"><span class = "S2">MATERIALS</span></h2><p class = "S4"><span class = "S2">We will use two model files for this tutorial: a MAT-file formated model and an SBML formated model. First we must loads both files into the tutorial directory (cleaning any old copies).</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">cd(fileparts(which(</span><span class = "S13">'tutorial_IO.mlx'</span><span class = "S14">)));</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14"></span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S15">% Copies the two files required for this tutorial (if they are not yet present).</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">try</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    delete </span><span class = "S13">'ecoli_core_model.mat'</span><span class = "S14">;</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    delete </span><span class = "S13">'Abiotrophia_defectiva_ATCC_49176.xml'</span><span class = "S14">  </span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    copyfile(which(</span><span class = "S13">'ecoli_core_model.mat'</span><span class = "S12">), </span><span class = "S13">'.'</span><span class = "S14">);</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    copyfile(which(</span><span class = "S13">'Abiotrophia_defectiva_ATCC_49176.xml'</span><span class = "S12">), </span><span class = "S13">'.'</span><span class = "S12">); </span><span class = "S15">%TODO: The 'Abiotrophia_defectiva_ATCC_49176.xml' not found in corbatoolbox therefore cannot copy file. Also this file is not used in the tutorial. </span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">end</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><h2 class = "S9"><span class = "S2">PROCEDURE</span></h2><p class = "S4"><span class = "S2">The time that it takes to load a model depends on the file format, the complexity of a model and the machine. The loading of a MAT-file, even of some large models, can take only seconds, whereas large SBML files can take a few minutes to load. </span></p><h2 class = "S3"><span class = "S2">Reading a model (timing: 1 second to a few minutes)</span></h2><p class = "S4"><span class = "S2">The most direct way to load a model into The COBRA Toolbox is to use the </span><span class = "S7">readCbModel</span><span class = "S2"> function. For example, to load a model from a MAT-file, you can simply use the filename (with or without file extension). </span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">fileName = </span><span class = "S13">'ecoli_core_model.mat'</span><span class = "S14">;</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14">model = readCbModel(fileName);</span></p></div></div><p class = "S18"><span class = "S2">The </span><span class = "S7">readCbModel </span><span class = "S2">function has a second optional input that specifies the file type being loaded. In the above example the file type does not need to be specified since the input default is a 'Matlab' file type. To load file types other than a MAT-file, specificy the file type for input as: ‘SBML’, ‘SimPheny’, ‘SimPhenyPlus’, ‘SimPhenyText’, or 'Excel’. </span></p></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S4"><span class = "S2">You can also call the </span><span class = "S7">readCbModel </span><span class = "S2">function without a fileName to get a dialog box, this is provided the Java feature is available. </span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S19">if </span><span class = "S12">usejava(</span><span class = "S13">'desktop'</span><span class = "S12">) </span><span class = "S15">% This line of code is to avoid execution of example in non gui-environments    </span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14">    model = readCbModel();</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">end</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S4"><span class = "S2">Once the model is loaded it can be used directly with The COBRA Toolbox functions. To view the data stored in the model use the following command.</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S19">if </span><span class = "S12">usejava(</span><span class = "S13">'desktop'</span><span class = "S12">) </span><span class = "S15">% This line of code is to avoid execution of example in non gui-environments    </span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    open </span><span class = "S20">model</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">end</span></p></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><h2 class = "S9"><span class = "S2">Writing a model (timing: 1 second to a few minutes)</span></h2><p class = "S4"><span class = "S2">To wr</span><span class = "S2">ite files, use the </span><span class = "S7">writeCbModel</span><span class = "S2"> function</span><span class = "S2">.</span><span class = "S2"> A dialog box will appear, select or enter the filename and the file format. The output is then generated and saved to the directory indicated in the diaglog box. A summary of the fields present in the model will also appear in the command window. </span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S19">if </span><span class = "S12">usejava(</span><span class = "S13">'desktop'</span><span class = "S12">) </span><span class = "S15">% This line of code is to avoid execution of example in non gui-environments</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14">    writeCbModel(model)</span></p></div><div class = 'inlineWrapper outputs'><p class = "S11 lineNode"><span class = "S16">end</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsVariableStringElement scrollableOutput" uid="BA09D5D2" data-testid="output_0" data-width="1334" style="width: 1364px; max-height: 294px;"><div class="textElement"><div>ans = </div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S: [72×95 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mets: {72×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b: [72×1 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; csense: [72×1 char]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rxns: {95×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lb: [95×1 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ub: [95×1 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c: [95×1 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; osense: -1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;genes: {137×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rules: {95×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;metFormulas: {72×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; metNames: {72×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;description: 'ecoli_core_model.mat'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grRules: {95×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp; rxnGeneMat: [95×137 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rxnNames: {95×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp; subSystems: {95×1 cell}<br><br></div></div></div></div></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><p class = "S4"><span class = "S2">The </span><span class = "S7">writeCbModel </span><span class = "S2">function has a second optional input that specifies the file type in which the model should be written and saved. In the above example the file type was not specified and so the default file type to be saved was as a MAT-file. To use the function to write a file types other than a MAT-file, specificy the file type for input as: ‘text’,’xls’, or ‘sbml’. </span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S19">if </span><span class = "S12">usejava(</span><span class = "S13">'desktop'</span><span class = "S12">) </span><span class = "S15">% This line of code is to avoid execution of example in non gui-environments</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    writeCbModel(mo</span><span class = "S13">del,'t</span><span class = "S14">ext')</span></p></div><div class = 'inlineWrapper outputs'><p class = "S11 lineNode"><span class = "S16">end</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsVariableStringElement scrollableOutput" uid="CB3276A8" data-testid="output_1" data-width="1334" style="width: 1364px; max-height: 294px;"><div class="textElement"><div>ans = </div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S: [72×95 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mets: {72×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b: [72×1 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; csense: [72×1 char]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rxns: {95×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lb: [95×1 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ub: [95×1 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c: [95×1 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; osense: -1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;genes: {137×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rules: {95×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;metFormulas: {72×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; metNames: {72×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp;description: 'ecoli_core_model.mat'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grRules: {95×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp; rxnGeneMat: [95×137 double]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rxnNames: {95×1 cell}<br>&nbsp;&nbsp;&nbsp;&nbsp; subSystems: {95×1 cell}<br><br></div></div></div></div></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment active'><p class = "S4"><span class = "S2">It is also possible</span><span class = "S2"> to sp</span><span class = "S2">e</span><span class = "S2">cify the file type and f</span><span class = "S2">i</span><span class = "S2">le name explicitly. The following example writes a model directly to the file name 'Acidaminococcus.xml'.</span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S19">if </span><span class = "S12">usejava(</span><span class = "S13">'desktop'</span><span class = "S12">) </span><span class = "S15">% This line of code is to avoid execution of example in non gui-environments</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    writeCbModel(model, </span><span class = "S13">'SBML'</span><span class = "S12">, </span><span class = "S13">'Acidaminococcus.xml'</span><span class = "S14">)</span></p></div><div class = 'inlineWrapper outputs'><p class = "S11 lineNode"><span class = "S16">end</span></p><div class="outputParagraph"><div class="inlineElement embeddedOutputsTextElement" uid="00A75630" data-testid="output_2" data-width="1334" style="width: 1364px;"><div class="textElement">Document written</div></div><div class="inlineElement embeddedOutputsVariableStringElement scrollableOutput" uid="2CC81C0B" data-testid="output_3" data-width="1334" style="width: 1364px;"><div class="textElement"><div>ans = </div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; constraint: [1×0 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp; functionDefinition: [1×0 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event: [1×0 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rule: [1×0 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unitDefinition: [1×1 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initialAssignment: [1×0 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SBML_level: 3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SBML_version: 1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; annotation: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;areaUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;avogadro_symbol: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; conversionFactor: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; delay_symbol: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extentUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;fbc_activeObjective: 'obj'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbc_version: 2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; id: 'COBRAModel'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lengthUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; metaid: 'COBRAModel'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;notes: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sboTerm: -1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; substanceUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time_symbol: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; typecode: 'SBML_MODEL'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;volumeUnits: ''<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;species: [1×72 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compartment: [1×2 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameter: [1×5 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reaction: [1×95 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbc_fluxBound: [1×2 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbc_geneProduct: [1×137 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fbc_objective: [1×1 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; namespaces: [1×2 struct]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fbc_strict: 1<br><br></div></div></div></div></div></div></div><p class = "S0"></p><div class = 'SectionBlock containment'><h2 class = "S9"><span class = "S2">CLEAN UP</span></h2><p class = "S4"><span class = "S2">Clean up of materials used in the tutorial.  </span></p><div class = 'LineNodeBlock contiguous'><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14">currentDir = pwd;</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">cd(fileparts(which(</span><span class = "S13">'tutorial_IO.mlx'</span><span class = "S14">)));</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14"></span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S15">% Delete the files used in this tutorial (if they are present).</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">try</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    delete(</span><span class = "S13">'ecoli_core_model.mat'</span><span class = "S14">);</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    delete(</span><span class = "S13">'Abiotrophia_defectiva_ATCC_49176.xml'</span><span class = "S12">); </span><span class = "S15">%TODO: The 'Abiotrophia_defectiva_ATCC_49176.xml' not found in corbatoolbox therefore cannot copy file. Also this file is not used in the tutorial. </span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S12">    delete(</span><span class = "S13">'Acidaminococcus.xml'</span><span class = "S14">);</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S16">end</span></p></div><div class = 'inlineWrapper'><p class = "S11 lineNode"><span class = "S14">cd(currentDir)</span></p></div></div></div></div>
<!-- 
##### SOURCE BEGIN #####
%% Input and output of reconstructions and mdoels 
%% Author(s): Thomas Pfau, University of Luxembourg
%% Reviewers: Catherine Clancy
%% INTRODUCTION
% This tutorial aims at providing information on how to load models into The 
% COBRA Toolbox and export them to other formats.
%% Available input formats
% The COBRA Toolbox supports the use of models in multiple formats, including:
% 
% * MAT-file format 
% * Systems Biology Markup Language (SBML) format 
% * SimPheny format
% * Excel format
% 
% The most commonly used model format is a MAT-file (|.mat| ) format where 
% by a simple MATLAB |struct| contains one or more of the fields defined in The 
% COBRA Toolbox <https://opencobra.github.io/cobratoolbox/docs/COBRAModelFields.html 
% Documentation>. 
%% MAT-file format
% A model in a MAT-file format is required to follow the rules defined in The 
% COBRA Toolbox <https://opencobra.github.io/cobratoolbox/docs/ExcelModelFileDefinition.html 
% Documentation>. 
%% SBML format
% The COBRA Toolbox currently supports models formats of SBML Level 3 version 
% 1 (as defined <http://sbml.org/Documents/Specifications here>) and has legacy 
% support for older versions of SBML. It also supports the Level 3 Flux Balance 
% Constraints (FBC) package (both in version 1 and version 2). 
% 
% The COBRA Toolbox will use the provided SBML IDs as IDs for the respective 
% elements of the model structure, and use the name fields as names. It is assumed 
% (but not necessary), that metabolite IDs start with a "M_", reaction IDs start 
% with a "R_" , gene IDs start with a "G_", and compartment IDs start with a "C_". 
% This is due to the limitation on identifiers in SBML and those starting sequences 
% will be removed if they are consistently present in the model. 
% 
% Metabolite IDs of the MAT-file format use a metabolite identfier followed 
% by a compartment identifier in square brackets (e.g. ala_L[c]). Since brackets 
% are illegal characters for SBML IDs, The COBRA Toolbox assumes, for all non 
% boundary species, that a compartment identifier preceded by an underscore (e.g. 
% SBML ID: M_ala_L_c) is equivalent to the MAT-file compartment identifiers and 
% converted to a model as such.
% 
% The COBRA Toolbox has a legacy support for the NOTE Fields defined in <http://www.nature.com/nprot/journal/v6/n9/abs/nprot.2011.308.html 
% Schellenberger et al, Nature Protocols, 2011>, but it is suggested to instead 
% use annotations whenever possible. In general, if a fbc-package field and a 
% NOTES field is present, the fbc-package value will be used (e.g. CHARGE for 
% metabolites, or GENE_ASSOCIATION for reactions). The same applies to annotations, 
% i.e. if there is an annotation for an EC number, the Notes field EC Number will 
% be ignored. However, the charge field in SBML Level 2 will be overwritten by 
% the Notes field definitions.
%% *SimPheny format*
% SimPheny models provided in 3 or 4 files (4 if GPR rules are provided). The 
% model identifiers will be used as presented in the SimPheny files.
%% Excel format
% A model in a excel file formats are accepted by The COBRA Toolbox if the file 
% adheres to the specifications listed in The COBRA Toolbox <https://opencobra.github.io/cobratoolbox/docs/ExcelModelFileDefinition.html 
% Documentation>. 
%% Available output formats
% The COBRA Toolbox also allows storage in multiple file types as detailed below.
%% MAT-files formats
% The MAT-file (|.mat| ) format is most commonly used. The MAT-file format make 
% up is a simple MATLAB |struct| containing one or more of the fields defined 
% in The COBRA Toolbox <https://opencobra.github.io/cobratoolbox/docs/COBRAModelFields.html 
% Documentation>. It has the advantage of lossless data storage even for model 
% specific fields not supported by The COBRA Toolbox.
%% SBML format 
% SBML is a commonly used format to store biological models. The COBRA Toolbox 
% allows the generation of models using SBML Level 3 Version 1 and uses the FBC-package 
% extension to encode constraint based properties. This is the format that is 
% recommended for publication, as it can be used by many different tools and allows 
% the best use of the model.
%% Excel format
% Historically, models were often exchanged using Excel files, and this is still 
% in use today. Some users prefer to have an overview of a model using Excel. 
% The COBRA Toolbox offers an Excel export of the format described in The COBRA 
% Toolbox <https://opencobra.github.io/cobratoolbox/docs/ExcelModelFileDefinition.html 
% Documentation>.
%% Text Format
% Finally, The COBRA Toolbox offers a simple textual export, which is essentially 
% a tab separated file containing the reactions with their reaction formulas along 
% with the associated GPRs, but no further information. This format only uses 
% the required fields and will ignore any optional fields.
%% MATERIALS
% We will use two model files for this tutorial: a MAT-file formated model and 
% an SBML formated model. First we must loads both files into the tutorial directory 
% (cleaning any old copies).

cd(fileparts(which('tutorial_IO.mlx')));

% Copies the two files required for this tutorial (if they are not yet present).
try
    delete 'ecoli_core_model.mat';
    delete 'Abiotrophia_defectiva_ATCC_49176.xml'  
    copyfile(which('ecoli_core_model.mat'), '.');
    copyfile(which('Abiotrophia_defectiva_ATCC_49176.xml'), '.'); %TODO: The 'Abiotrophia_defectiva_ATCC_49176.xml' not found in corbatoolbox therefore cannot copy file. Also this file is not used in the tutorial. 
end
%% PROCEDURE
% The time that it takes to load a model depends on the file format, the complexity 
% of a model and the machine. The loading of a MAT-file, even of some large models, 
% can take only seconds, whereas large SBML files can take a few minutes to load. 
%% Reading a model (timing: 1 second to a few minutes)
% The most direct way to load a model into The COBRA Toolbox is to use the |readCbModel| 
% function. For example, to load a model from a MAT-file, you can simply use the 
% filename (with or without file extension). 

fileName = 'ecoli_core_model.mat';
model = readCbModel(fileName);
%% 
% The |readCbModel |function has a second optional input that specifies 
% the file type being loaded. In the above example the file type does not need 
% to be specified since the input default is a 'Matlab' file type. To load file 
% types other than a MAT-file, specificy the file type for input as: ‘SBML’, ‘SimPheny’, 
% ‘SimPhenyPlus’, ‘SimPhenyText’, or 'Excel’. 
% 
% You can also call the |readCbModel |function without a fileName to get 
% a dialog box, this is provided the Java feature is available. 

if usejava('desktop') % This line of code is to avoid execution of example in non gui-environments    
    model = readCbModel();
end
%% 
% Once the model is loaded it can be used directly with The COBRA Toolbox 
% functions. To view the data stored in the model use the following command.

if usejava('desktop') % This line of code is to avoid execution of example in non gui-environments    
    open model
end
%% Writing a model (timing: 1 second to a few minutes)
% To write files, use the |writeCbModel| function. A dialog box will appear, 
% select or enter the filename and the file format. The output is then generated 
% and saved to the directory indicated in the diaglog box. A summary of the fields 
% present in the model will also appear in the command window. 

if usejava('desktop') % This line of code is to avoid execution of example in non gui-environments
    writeCbModel(model)
end
%% 
% The |writeCbModel |function has a second optional input that specifies 
% the file type in which the model should be written and saved. In the above example 
% the file type was not specified and so the default file type to be saved was 
% as a MAT-file. To use the function to write a file types other than a MAT-file, 
% specificy the file type for input as: ‘text’,’xls’, or ‘sbml’. 

if usejava('desktop') % This line of code is to avoid execution of example in non gui-environments
    writeCbModel(model,'text')
end
%% 
% It is also possible to specify the file type and file name explicitly. 
% The following example writes a model directly to the file name 'Acidaminococcus.xml'.

if usejava('desktop') % This line of code is to avoid execution of example in non gui-environments
    writeCbModel(model, 'SBML', 'Acidaminococcus.xml')
end
%% CLEAN UP
% Clean up of materials used in the tutorial.  

currentDir = pwd;
cd(fileparts(which('tutorial_IO.mlx')));

% Delete the files used in this tutorial (if they are present).
try
    delete('ecoli_core_model.mat');
    delete('Abiotrophia_defectiva_ATCC_49176.xml'); %TODO: The 'Abiotrophia_defectiva_ATCC_49176.xml' not found in corbatoolbox therefore cannot copy file. Also this file is not used in the tutorial. 
    delete('Acidaminococcus.xml');
end
cd(currentDir)
##### SOURCE END #####
--></body></html>